<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://use.typekit.net/oov2wcw.css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>ADA06</title>
	<script>
		function buscar(){
			let buscar = document.getElementById("buscar").value;
			var req = new XMLHttpRequest();
			//cambiar por tu carpeta donde se encuentre el proyecto:
			//ejemplo: http://localhost/aqui_tu_direccion_de_carpetas/consulta.php 
	        let url = new URL('http://localhost/search_retrieve/Indizacion-y-busqueda/consultas.php');
	        url.searchParams.set('buscar', buscar);
	        req.open('GET', url); 
	        req.send();
	        //console.log(url);
	        req.onload = function() {
	          const respuesta = req.responseText;
	          console.log(respuesta);
	          arregloDeSubCadenas = respuesta.split("<br>");
	          mostrarDatos(arregloDeSubCadenas);
	          console.log(arregloDeSubCadenas);

	        }
	    }
	    let myArticle;
        let myPara1;
	      function mostrarDatos(arrarRespuesta) {
	        let trD = Array.prototype.slice.call(document.getElementsByClassName("creado"), 0);
	        for(element of trD){
	          element.remove();
	        }
	        if (arrarRespuesta.length == 1 ) {
	          myArticle = document.createElement('div');
	          myPara1 = document.createElement('a');

	          myPara1.textContent = arrarRespuesta[0];
	              
	          myArticle.className = 'field creado';
	          myArticle.style = 'aling: center'
	          myArticle.appendChild(myPara1);
	          document.body.appendChild(myArticle);
	        } else {

	        }
	        for (var i = 0; i < arrarRespuesta.length-1; i++) {
	          myArticle = document.createElement('div');
	          myPara1 = document.createElement('a');
			
			  let value = arrarRespuesta[i].split("|");
	          myPara1.textContent = value[0];
			  myPara1.setAttribute("href", value[1] );
	              
	          myArticle.className = 'field creado';
	          myArticle.style = 'aling: center'
	          myArticle.appendChild(myPara1);
	          document.body.appendChild(myArticle);
	          
	        }    
		}
	</script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="box">
		<div class="container-1">
			<h1> Búsqueda de información en la web</h1>
			<h2>Indización y búsqueda</h>
		</div>
	</div>
		<div class="field" id="searchform">
			<input type="text" name="buscar" id="buscar" placeholder="Buscando...">
			<button type="submit" id="buscador" onclick="buscar()" name="buscador">Buscar</button>
		</div>
</body>
</html>